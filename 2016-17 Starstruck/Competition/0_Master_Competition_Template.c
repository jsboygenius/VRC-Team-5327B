#pragma config(Sensor, in1,    TensionerPot,   sensorPotentiometer)
#pragma config(Sensor, in2,    LauncherPot,    sensorPotentiometer)
#pragma config(Sensor, in3,    RLine,          sensorLineFollower)
#pragma config(Sensor, in4,    LLine,          sensorLineFollower)
#pragma config(Sensor, in5,    Gyro,           sensorGyro)
#pragma config(Sensor, dgtl10, DirectionLED,   sensorLEDtoVCC)
#pragma config(Sensor, dgtl11, Claw,           sensorDigitalOut)
#pragma config(Sensor, dgtl12, Lock,           sensorDigitalOut)
#pragma config(Motor,  port2,           RFBase,        tmotorVex393_MC29, openLoop, driveRight)
#pragma config(Motor,  port3,           LFBase,        tmotorVex393_MC29, openLoop, reversed, driveLeft)
#pragma config(Motor,  port4,           LaunchL1,      tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port5,           LaunchR1,      tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port6,           RBBase,        tmotorVex393_MC29, openLoop, driveRight)
#pragma config(Motor,  port7,           LBBase,        tmotorVex393_MC29, openLoop, reversed, driveLeft)
#pragma config(Motor,  port8,           LaunchR2,      tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port9,           LaunchL23,     tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port10,          LaunchR3,      tmotorVex393_HBridge, openLoop, reversed)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

/*
BUILD DATE: 7/19/16
AUTHOR: JAIVEER SINGH
V1.2.2
*/

//VRC Specific pragmas below
#pragma platform(VEX)
#pragma competitionControl(Competition)
#pragma autonomousDuration(20)
#pragma userControlDuration(120)
#include "Vex_Competition_Includes.h"
//VRC Specific pragmas above

//The following lines define each of the buttons and joysticks on the controller in more readable terms

//Debug/Override
bool debugModeEnabled = false;
#define debugBtn vexRT[Btn7D]
#define overrideBtn vexRT[Btn7R]

//Base control
#define X_Joy vexRT[Ch4]
#define Y_Joy vexRT[Ch3]
#define rot_Joy -vexRT[Ch1]
#define directionToggleBtn vexRT[Btn7U]
#define toggleSlowBtn vexRT[Btn7L]

//Dumpapult - manual adjust
#define LaunchUpBtn (debugModeEnabled ? vexRT[Btn6U] : 0)
#define LaunchDownBtn (debugModeEnabled ? vexRT[Btn6D] : 0)
#define LaunchUnlockBtn (debugModeEnabled ? vexRT[Btn8U] : 0)
#define LaunchLockBtn (debugModeEnabled ? vexRT[Btn8D] : 0)
#define ClawOpenBtn (debugModeEnabled ? vexRT[Btn8R] : 0)
#define ClawCloseBtn (debugModeEnabled ? vexRT[Btn8L] : 0)

//Dumpapult - auto function
#define LaunchModifierBtn (!debugModeEnabled ? vexRT[Btn6U] : 0)
#define DumpModifierBtn (!debugModeEnabled ? vexRT[Btn6D] : 0)
#define Modifier1StarBtn (!debugModeEnabled ? vexRT[Btn8U] : 0)
#define Modifier2StarBtn (!debugModeEnabled ? vexRT[Btn8R] : 0)
#define Modifier3StarBtn (!debugModeEnabled ? vexRT[Btn8D] : 0)
#define ModifierCubeBtn (!debugModeEnabled ? vexRT[Btn8L] : 0)

//Lift
bool transmissionActive = false;
#define autoLiftBtn ((vexRT[Btn5U] == 1 && vexRT[Btn5D] == 1 && !debugModeEnabled) ? 1 : 0)
#define LiftTransmissionBtn ((vexRT[Btn5U] == 1 && vexRT[Btn5D] == 1 && debugModeEnabled) ? 1 : 0)
#define LiftUpBtn ((vexRT[Btn5U] == 1 && vexRT[Btn5D] == 0 && transmissionActive && debugModeEnabled) ? 1 : 0)
#define LiftDownBtn ((vexRT[Btn5D] == 1 && vexRT[Btn5U] == 0 && transmissionActive && debugModeEnabled) ? 1 : 0)

#define JohnCenaBtn vexRT[Btn5U]
#define NameBtn vexRT[Btn5D]

//These global variables are used to manage toggle and emergency stop functions
int robotDirection = 1;

//Include statements to reference the other header files containing specific parts of the code
#include "Libraries/SmartMotorLib.h"
#include "4_CONSTANTS.h" //All constants used in the entire program

#include "1_Driver_Control.h" //Driver Control-specific functions
#include "2_Autonomous.h"

void resetGyro()
{

	SensorType[Gyro] = sensorNone; //Reset gyroscope at beginning of program
	SensorType[Gyro] = sensorGyro;
	wait1Msec(250);
}


//Predefined construct
void pre_auton()
{
	bool bol = true;
	playSoundFile(bol ? "xp.wav" : "0");
	SmartMotorsInit();
	SmartMotorLinkMotors(LaunchL1, LaunchL23);
	SmartMotorLinkMotors(LaunchR1, LaunchR2);
	SmartMotorLinkMotors(LaunchR1, LaunchR3);
	SmartMotorRun();
	bStopTasksBetweenModes = false;
	resetGyro();
	SensorValue[Lock] = 1;
}

task usercontrol()
{
	startTask(Gearbox);
	startTask(Drive);
	startTask(EmergencyOverride);
	startTask(Debug);
	startTask(JohnCena);
	startTask(LCD);
	while(true) //Keep this task going so that the Vex Competition system does not mistake the robot for disconnected
	{
		EndTimeSlice();
	}
}

task autonomous()
{

}
